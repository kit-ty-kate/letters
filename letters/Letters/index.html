<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Letters (letters.Letters)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">letters</a> &#x00BB; Letters</nav><h1>Module <code>Letters</code></h1></header><dl><dt class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span class="keyword">module</span> <a href="Config/index.html">Config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Configuration providing needed information to connect to the SMTP server.</p></dd></dl><dl><dt class="spec type" id="type-body"><a href="#type-body" class="anchor"></a><code><span class="keyword">type</span> body</code><code> = </code><table class="variant"><tr id="type-body.Plain" class="anchored"><td class="def constructor"><a href="#type-body.Plain" class="anchor"></a><code>| </code><code><span class="constructor">Plain</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-body.Html" class="anchored"><td class="def constructor"><a href="#type-body.Html" class="anchor"></a><code>| </code><code><span class="constructor">Html</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-body.Mixed" class="anchored"><td class="def constructor"><a href="#type-body.Mixed" class="anchor"></a><code>| </code><code><span class="constructor">Mixed</span> <span class="keyword">of</span> string * string * <span>string option</span></code></td></tr></table></dt><dt class="spec type" id="type-recipient"><a href="#type-recipient" class="anchor"></a><code><span class="keyword">type</span> recipient</code><code> = </code><table class="variant"><tr id="type-recipient.To" class="anchored"><td class="def constructor"><a href="#type-recipient.To" class="anchor"></a><code>| </code><code><span class="constructor">To</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-recipient.Cc" class="anchored"><td class="def constructor"><a href="#type-recipient.Cc" class="anchor"></a><code>| </code><code><span class="constructor">Cc</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-recipient.Bcc" class="anchored"><td class="def constructor"><a href="#type-recipient.Bcc" class="anchor"></a><code>| </code><code><span class="constructor">Bcc</span> <span class="keyword">of</span> string</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-build_email"><a href="#val-build_email" class="anchor"></a><code><span class="keyword">val</span> build_email : <span>from:string</span> <span>&#45;&gt;</span> <span>recipients:<span><a href="index.html#type-recipient">recipient</a> list</span></span> <span>&#45;&gt;</span> <span>subject:string</span> <span>&#45;&gt;</span> <span>body:<a href="index.html#type-body">body</a></span> <span>&#45;&gt;</span> <span><span>(Mrmime.Mt.t, string)</span> Stdlib.result</span></code></dt><dd><p>Build an email using mrmime</p><p>This function is a helper function to simplify process of building an email with `mrmime`. It will return result type and wraps all exceptions into Error</p><p><code>from</code> string representation of the email proved as a `from` field, this can be a different email address than the <code>config.sender</code>.</p><p><code>recipients</code> list of email recipients</p><p><code>subject</code> the single line string used as the email `subject` field</p><p><code>body</code> string representation of the actual email message that can be either plain text or HTML message</p><p>Returns <code>result</code> indicating if built email is valid or Error if anything failed</p></dd></dl><dl><dt class="spec value" id="val-send"><a href="#val-send" class="anchor"></a><code><span class="keyword">val</span> send : <span>config:<a href="Config/index.html#type-t">Config.t</a></span> <span>&#45;&gt;</span> <span>sender:string</span> <span>&#45;&gt;</span> <span>recipients:<span><a href="index.html#type-recipient">recipient</a> list</span></span> <span>&#45;&gt;</span> <span>message:Mrmime.Mt.t</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p>Send the previously generated email</p><p>This function expects valid configuration, list of recipients and finally a valid `mrmime` representation of the email message.</p><p><code>config</code> valid configuration to connect the SMTP server.</p><p><code>recipients</code> list of valid email addresses.</p><p><code>message</code> valid `mrmime` representation of the email message.</p><p>Runs asynchronously using Lwt and retuns unit when the message is sent successfully. If anything fails during the process, throws an exception.</p></dd></dl></div></body></html>